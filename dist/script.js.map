{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/esri-loader/dist/umd/esri-loader.js","webpack:///./node_modules/dialog-polyfill/dialog-polyfill.js","webpack:///./node_modules/pluralize/pluralize.js","webpack:///./src/FormatError.ts","webpack:///./src/dialogUtils.ts","webpack:///./src/conversionUtils.ts","webpack:///./src/script.ts","webpack:///(webpack)/buildin/amd-define.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_currentUrl","DEFAULT_URL","handleScriptLoad","script","callback","errback","onScriptError","e","error","Error","src","removeEventListener","addEventListener","handleScriptError","onScriptLoad","utils","Promise","window","undefined","getScript","document","querySelector","isLoaded","globalRequire","on","loadCss","url","link","getCss","createElement","rel","href","createStylesheetLink","head","appendChild","loadScript","options","resolve","reject","getAttribute","css","dojoConfig","type","setAttribute","createScript","body","requireModules","errorHandler","args","_i","arguments","length","remove","loadModules","loadScriptOptions","then","esriLoader","factory","__WEBPACK_AMD_DEFINE_RESULT__","supportCustomEvent","CustomEvent","findNearestDialog","el","localName","parentElement","safeBlur","blur","inNodeList","nodeList","node","isFormMethodDialog","hasAttribute","toLowerCase","dialogPolyfillInfo","dialog","this","dialog_","replacedStyleTop_","openAsModal_","show","bind","showModal","close","returnValue","MutationObserver","maybeHideModal","observe","attributes","attributeFilter","timeout","removed","cb","downgradeModal","delayModel","ev","target","cand","substr","clearTimeout","setTimeout","forEach","set","setOpen","backdrop_","className","backdropClick_","event","x","createEvent","initCustomEvent","bubbles","cancelable","detail","Event","contains","style","zIndex","top","parentNode","removeChild","dialogPolyfill","dm","removeDialog","removeAttribute","focus","fake","insertBefore","firstChild","tabIndex","redirectedEvent","initMouseEvent","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","dispatchEvent","stopPropagation","focus_","query","map","push","join","activeElement","updateZIndex","dialogZ","backdropZ","open","pushDialog","getComputedStyle","invalid","k","ok","opacity","position","webkitOverflowScrolling","createsStackingContext","console","warn","needsCentering","reposition","nextSibling","opt_returnValue","closeEvent","element","scrollTop","documentElement","topValue","innerHeight","offsetHeight","Math","max","isInlinePositionSetByStylesheet","styleSheets","styleSheet","cssRules","j","rule","selectedNodes","querySelectorAll","selectorText","cssTop","getPropertyValue","cssBottom","bottom","forceRegisterDialog","HTMLDialogElement","registerDialog","DialogManager","pendingDialogStack","checkDOM","checkDOM_","overlay","forwardTab_","handleKey_","handleFocus_","zIndexLow_","zIndexHigh_","mo_","records","rec","removedNodes","Element","concat","blockDocument","childList","subtree","unblockDocument","disconnect","updateStacking","dpi","last","containedByTopDialog_","candidate","preventDefault","compareDocumentPosition","Node","DOCUMENT_POSITION_PRECEDING","keyCode","cancelEvent","slice","indexOf","allowed","unshift","index","splice","formSubmitter","useValue","testForm","method","methodDescriptor","getOwnPropertyDescriptor","HTMLFormElement","realGet","realSet","v","defaultPrevented","form","offsetX","offsetY","nativeFormSubmit","submit","pluralRules","singularRules","uncountables","irregularPlurals","irregularSingles","sanitizeRule","RegExp","restoreCase","word","token","toUpperCase","charAt","replace","match","str","result","sanitizeWord","rules","len","test","replaceWord","replaceMap","keepMap","checkWord","bool","pluralize","count","inclusive","pluralized","singular","plural","isPlural","isSingular","addPluralRule","replacement","addSingularRule","addUncountableRule","addIrregularRule","single","_super","FormatError","input","format","_this","source","__extends","dialogUtils_needsDialogPolyfill","dialogUtils_makeCloseableTextAreaDialog","id","textArea","readOnly","content","closeLink","header","classList","add","textContent","dialog_polyfill_default","a","dialogUtils_makeCloseableDialog","dialogUtils_showDialogHandler","_a","dataUrl","re","conversionUtils_read","mediaType","base64","data","text","btoa","decodeURIComponent","Boolean","src_FormatError","conversionUtils_parseDataUrl","dataset","dialogId","getElementById","textarea","cssPath","sri","integrity","crossOrigin","dialogUtils_addDialogPolyfillCss","esri_loader","_b","script_read","webMercatorUtils","Graphic","GraphicsLayer","EsriMap","SimpleFillSymbol","SimpleLineSymbol","SimpleMarkerSymbol","Draw","drawSelect","basemap","center","zoom","showAttribution","graphicsLayer","addLayer","clear","pointSymbol","lineSymbol","polygonSymbol","draw","projectGraphic","graphic","geometry","projectedGeometry","webMercatorToGeographic","spatialReference","log","geoType","symbol","g","label","val","activate","deactivate","layer","graphics","gLayer","jsonFeatures","jsonObjects","features","spatialRefernence","wkid","jsonString","JSON","stringify","encodeURIComponent","title","pluralize_default","createAnchor","li"],"mappings":"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EA,cACA,eACA,eACA,gBACA,gBACA,iBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,oBACA,qBACA,uBACA,uBACAzL,QAAA,SAAAkF,GACA,OAAA0F,EAAAY,iBAAAtG,EAAA,GAAAA,EAAA,QAOA,aACA,4BACA,yBACA,yBACA,2CACA,uBACA,iDACA,0GACA,yCACA,oCACA,2BACA,gIACA,6GACA,gBACA,uDACA,8BACA,iCACA,6BACA,2DACA,gCACA,iCACA,8BACA,gBACA,mBACA,eACAlF,QAAA,SAAAkF,GACA,OAAA0F,EAAAQ,cAAAlG,EAAA,GAAAA,EAAA,QAOA,WACA,gBACA,yEACA,0CACA,cACA,gGACA,6BACA,wBACA,6BACA,wFACA,+EACA,wCACA,6BACA,2GACA,kHACA,uGACA,kCACA,wCACA,+BACA,+BACA,sBACA,mBACA,gBACAlF,QAAA,SAAAkF,GACA,OAAA0F,EAAAU,gBAAApG,EAAA,GAAAA,EAAA,OAQA,YACA,SACA,SACA,MACA,UACA,OACA,QACA,YACA,QACA,QACA,QACA,QACA,UACA,SACA,OACA,OACA,UACA,QACA,WACA,MACA,WACA,cACA,QACA,SACA,WACA,YACA,MACA,SACA,YACA,YACA,YACA,WACA,MACA,UACA,UACA,WACA,eACA,SACA,SACA,YACA,WACA,YACA,cACA,QACA,UACA,QACA,SACA,aACA,YACA,WACA,OACA,QACA,OACA,QACA,QACA,QACA,OACA,OACA,WACA,SACA,YACA,WACA,OACA,WACA,OACA,SACA,WACA,SACA,SACA,WACA,SACA,UACA,QACA,QACA,SACA,UACA,gBACA,QACA,OACA,SACA,UACA,UACA,aACA,WACA,MAEA,gBACA,SACA,SACA,YACA,WACA,QACA,WACAlF,QAAA4K,EAAAW,oBAEAX,EAleAA,sWCHA,SAAAc,GAME,SAAAC,EAA4BC,EAA+BC,GAA3D,IAAAC,EACEJ,EAAApT,KAAAiG,KACE,sDACEsN,EAAOE,OAAM,SACNH,IACVrN,YALyBuN,EAAAF,QAA+BE,EAAAD,WA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","file":"script.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.esriLoader = global.esriLoader || {})));\n}(this, (function (exports) { 'use strict';\n\n/*\n  Copyright 2017 Esri\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n    http://www.apache.org/licenses/LICENSE-2.0\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n*/\nvar isBrowser = typeof window !== 'undefined';\nvar DEFAULT_URL = 'https://js.arcgis.com/4.6/';\n// this is the url that is currently being, or already has loaded\nvar _currentUrl;\nfunction createScript(url) {\n    var script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = url;\n    script.setAttribute('data-esri-loader', 'loading');\n    return script;\n}\nfunction createStylesheetLink(url) {\n    var link = document.createElement('link');\n    link.rel = 'stylesheet';\n    link.href = url;\n    return link;\n}\n// add a one-time load handler to script\n// and optionally add a one time error handler as well\nfunction handleScriptLoad(script, callback, errback) {\n    var onScriptError;\n    if (errback) {\n        // set up an error handler as well\n        onScriptError = handleScriptError(script, errback);\n    }\n    var onScriptLoad = function () {\n        // pass the script to the callback\n        callback(script);\n        // remove this event listener\n        script.removeEventListener('load', onScriptLoad, false);\n        if (onScriptError) {\n            // remove the error listener as well\n            script.removeEventListener('error', onScriptError, false);\n        }\n    };\n    script.addEventListener('load', onScriptLoad, false);\n}\n// add a one-time error handler to the script\nfunction handleScriptError(script, callback) {\n    var onScriptError = function (e) {\n        // reject the promise and remove this event listener\n        callback(e.error || new Error(\"There was an error attempting to load \" + script.src));\n        // remove this event listener\n        script.removeEventListener('error', onScriptError, false);\n    };\n    script.addEventListener('error', onScriptError, false);\n    return onScriptError;\n}\n// allow consuming libraries to provide their own Promise implementations\nvar utils = {\n    Promise: isBrowser ? window['Promise'] : undefined\n};\n// get the script injected by this library\nfunction getScript() {\n    return document.querySelector('script[data-esri-loader]');\n}\n// TODO: export this function?\n// check if the css url has been injected or added manually\nfunction getCss(url) {\n    return document.querySelector(\"link[href*=\\\"\" + url + \"\\\"]\");\n}\n// has ArcGIS API been loaded on the page yet?\nfunction isLoaded() {\n    var globalRequire = window['require'];\n    // .on() ensures that it's Dojo's AMD loader\n    return globalRequire && globalRequire.on;\n}\n// lazy load the CSS needed for the ArcGIS API\nfunction loadCss(url) {\n    var link = getCss(url);\n    if (!link) {\n        // create & load the css library\n        link = createStylesheetLink(url);\n        document.head.appendChild(link);\n    }\n    return link;\n}\n// load the ArcGIS API on the page\nfunction loadScript(options) {\n    if (options === void 0) { options = {}; }\n    // default options\n    if (!options.url) {\n        options.url = DEFAULT_URL;\n    }\n    return new utils.Promise(function (resolve, reject) {\n        var script = getScript();\n        if (script) {\n            // the API is already loaded or in the process of loading...\n            // NOTE: have to test against scr attribute value, not script.src\n            // b/c the latter will return the full url for relative paths\n            var src = script.getAttribute('src');\n            if (src !== options.url) {\n                // potentially trying to load a different version of the API\n                reject(new Error(\"The ArcGIS API for JavaScript is already loaded (\" + src + \").\"));\n            }\n            else {\n                if (isLoaded()) {\n                    // the script has already successfully loaded\n                    resolve(script);\n                }\n                else {\n                    // wait for the script to load and then resolve\n                    handleScriptLoad(script, resolve, reject);\n                }\n            }\n        }\n        else {\n            if (isLoaded()) {\n                // the API has been loaded by some other means\n                // potentially trying to load a different version of the API\n                reject(new Error(\"The ArcGIS API for JavaScript is already loaded.\"));\n            }\n            else {\n                // this is the first time attempting to load the API\n                if (options.css) {\n                    // load the css before loading the script\n                    loadCss(options.css);\n                }\n                if (options.dojoConfig) {\n                    // set dojo configuration parameters before loading the script\n                    window['dojoConfig'] = options.dojoConfig;\n                }\n                // create a script object whose source points to the API\n                script = createScript(options.url);\n                _currentUrl = options.url;\n                // once the script is loaded...\n                handleScriptLoad(script, function () {\n                    // update the status of the script\n                    script.setAttribute('data-esri-loader', 'loaded');\n                    // return the script\n                    resolve(script);\n                }, reject);\n                // load the script\n                document.body.appendChild(script);\n            }\n        }\n    });\n}\n// wrap dojo's require() in a promise\nfunction requireModules(modules) {\n    return new utils.Promise(function (resolve, reject) {\n        // If something goes wrong loading the esri/dojo scripts, reject with the error.\n        var errorHandler = window['require'].on('error', reject);\n        window['require'](modules, function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            // remove error handler\n            errorHandler.remove();\n            // Resolve with the parameters from dojo require as an array.\n            resolve(args);\n        });\n    });\n}\n// returns a promise that resolves with an array of the required modules\n// also will attempt to lazy load the ArcGIS API if it has not already been loaded\nfunction loadModules(modules, loadScriptOptions) {\n    if (loadScriptOptions === void 0) { loadScriptOptions = {}; }\n    if (!isLoaded()) {\n        // script is not yet loaded\n        if (!loadScriptOptions.url && _currentUrl) {\n            // alredy in the process of loading, so default to the same url\n            loadScriptOptions.url = _currentUrl;\n        }\n        // attept to load the script then load the modules\n        return loadScript(loadScriptOptions).then(function () { return requireModules(modules); });\n    }\n    else {\n        // script is already loaded, just load the modules\n        return requireModules(modules);\n    }\n}\n// export a namespace to expose all functions\nvar esriLoader = {\n    getScript: getScript,\n    isLoaded: isLoaded,\n    loadModules: loadModules,\n    loadScript: loadScript,\n    utils: utils\n};\n\nexports.utils = utils;\nexports.getScript = getScript;\nexports.isLoaded = isLoaded;\nexports.loadCss = loadCss;\nexports.loadScript = loadScript;\nexports.loadModules = loadModules;\nexports['default'] = esriLoader;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=esri-loader.js.map\n","(function() {\n\n  // nb. This is for IE10 and lower _only_.\n  var supportCustomEvent = window.CustomEvent;\n  if (!supportCustomEvent || typeof supportCustomEvent === 'object') {\n    supportCustomEvent = function CustomEvent(event, x) {\n      x = x || {};\n      var ev = document.createEvent('CustomEvent');\n      ev.initCustomEvent(event, !!x.bubbles, !!x.cancelable, x.detail || null);\n      return ev;\n    };\n    supportCustomEvent.prototype = window.Event.prototype;\n  }\n\n  /**\n   * @param {Element} el to check for stacking context\n   * @return {boolean} whether this el or its parents creates a stacking context\n   */\n  function createsStackingContext(el) {\n    while (el && el !== document.body) {\n      var s = window.getComputedStyle(el);\n      var invalid = function(k, ok) {\n        return !(s[k] === undefined || s[k] === ok);\n      }\n      if (s.opacity < 1 ||\n          invalid('zIndex', 'auto') ||\n          invalid('transform', 'none') ||\n          invalid('mixBlendMode', 'normal') ||\n          invalid('filter', 'none') ||\n          invalid('perspective', 'none') ||\n          s['isolation'] === 'isolate' ||\n          s.position === 'fixed' ||\n          s.webkitOverflowScrolling === 'touch') {\n        return true;\n      }\n      el = el.parentElement;\n    }\n    return false;\n  }\n\n  /**\n   * Finds the nearest <dialog> from the passed element.\n   *\n   * @param {Element} el to search from\n   * @return {HTMLDialogElement} dialog found\n   */\n  function findNearestDialog(el) {\n    while (el) {\n      if (el.localName === 'dialog') {\n        return /** @type {HTMLDialogElement} */ (el);\n      }\n      el = el.parentElement;\n    }\n    return null;\n  }\n\n  /**\n   * Blur the specified element, as long as it's not the HTML body element.\n   * This works around an IE9/10 bug - blurring the body causes Windows to\n   * blur the whole application.\n   *\n   * @param {Element} el to blur\n   */\n  function safeBlur(el) {\n    if (el && el.blur && el !== document.body) {\n      el.blur();\n    }\n  }\n\n  /**\n   * @param {!NodeList} nodeList to search\n   * @param {Node} node to find\n   * @return {boolean} whether node is inside nodeList\n   */\n  function inNodeList(nodeList, node) {\n    for (var i = 0; i < nodeList.length; ++i) {\n      if (nodeList[i] === node) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @param {HTMLFormElement} el to check\n   * @return {boolean} whether this form has method=\"dialog\"\n   */\n  function isFormMethodDialog(el) {\n    if (!el || !el.hasAttribute('method')) {\n      return false;\n    }\n    return el.getAttribute('method').toLowerCase() === 'dialog';\n  }\n\n  /**\n   * @param {!HTMLDialogElement} dialog to upgrade\n   * @constructor\n   */\n  function dialogPolyfillInfo(dialog) {\n    this.dialog_ = dialog;\n    this.replacedStyleTop_ = false;\n    this.openAsModal_ = false;\n\n    // Set a11y role. Browsers that support dialog implicitly know this already.\n    if (!dialog.hasAttribute('role')) {\n      dialog.setAttribute('role', 'dialog');\n    }\n\n    dialog.show = this.show.bind(this);\n    dialog.showModal = this.showModal.bind(this);\n    dialog.close = this.close.bind(this);\n\n    if (!('returnValue' in dialog)) {\n      dialog.returnValue = '';\n    }\n\n    if ('MutationObserver' in window) {\n      var mo = new MutationObserver(this.maybeHideModal.bind(this));\n      mo.observe(dialog, {attributes: true, attributeFilter: ['open']});\n    } else {\n      // IE10 and below support. Note that DOMNodeRemoved etc fire _before_ removal. They also\n      // seem to fire even if the element was removed as part of a parent removal. Use the removed\n      // events to force downgrade (useful if removed/immediately added).\n      var removed = false;\n      var cb = function() {\n        removed ? this.downgradeModal() : this.maybeHideModal();\n        removed = false;\n      }.bind(this);\n      var timeout;\n      var delayModel = function(ev) {\n        if (ev.target !== dialog) { return; }  // not for a child element\n        var cand = 'DOMNodeRemoved';\n        removed |= (ev.type.substr(0, cand.length) === cand);\n        window.clearTimeout(timeout);\n        timeout = window.setTimeout(cb, 0);\n      };\n      ['DOMAttrModified', 'DOMNodeRemoved', 'DOMNodeRemovedFromDocument'].forEach(function(name) {\n        dialog.addEventListener(name, delayModel);\n      });\n    }\n    // Note that the DOM is observed inside DialogManager while any dialog\n    // is being displayed as a modal, to catch modal removal from the DOM.\n\n    Object.defineProperty(dialog, 'open', {\n      set: this.setOpen.bind(this),\n      get: dialog.hasAttribute.bind(dialog, 'open')\n    });\n\n    this.backdrop_ = document.createElement('div');\n    this.backdrop_.className = 'backdrop';\n    this.backdrop_.addEventListener('click', this.backdropClick_.bind(this));\n  }\n\n  dialogPolyfillInfo.prototype = {\n\n    get dialog() {\n      return this.dialog_;\n    },\n\n    /**\n     * Maybe remove this dialog from the modal top layer. This is called when\n     * a modal dialog may no longer be tenable, e.g., when the dialog is no\n     * longer open or is no longer part of the DOM.\n     */\n    maybeHideModal: function() {\n      if (this.dialog_.hasAttribute('open') && document.body.contains(this.dialog_)) { return; }\n      this.downgradeModal();\n    },\n\n    /**\n     * Remove this dialog from the modal top layer, leaving it as a non-modal.\n     */\n    downgradeModal: function() {\n      if (!this.openAsModal_) { return; }\n      this.openAsModal_ = false;\n      this.dialog_.style.zIndex = '';\n\n      // This won't match the native <dialog> exactly because if the user set top on a centered\n      // polyfill dialog, that top gets thrown away when the dialog is closed. Not sure it's\n      // possible to polyfill this perfectly.\n      if (this.replacedStyleTop_) {\n        this.dialog_.style.top = '';\n        this.replacedStyleTop_ = false;\n      }\n\n      // Clear the backdrop and remove from the manager.\n      this.backdrop_.parentNode && this.backdrop_.parentNode.removeChild(this.backdrop_);\n      dialogPolyfill.dm.removeDialog(this);\n    },\n\n    /**\n     * @param {boolean} value whether to open or close this dialog\n     */\n    setOpen: function(value) {\n      if (value) {\n        this.dialog_.hasAttribute('open') || this.dialog_.setAttribute('open', '');\n      } else {\n        this.dialog_.removeAttribute('open');\n        this.maybeHideModal();  // nb. redundant with MutationObserver\n      }\n    },\n\n    /**\n     * Handles clicks on the fake .backdrop element, redirecting them as if\n     * they were on the dialog itself.\n     *\n     * @param {!Event} e to redirect\n     */\n    backdropClick_: function(e) {\n      if (!this.dialog_.hasAttribute('tabindex')) {\n        // Clicking on the backdrop should move the implicit cursor, even if dialog cannot be\n        // focused. Create a fake thing to focus on. If the backdrop was _before_ the dialog, this\n        // would not be needed - clicks would move the implicit cursor there.\n        var fake = document.createElement('div');\n        this.dialog_.insertBefore(fake, this.dialog_.firstChild);\n        fake.tabIndex = -1;\n        fake.focus();\n        this.dialog_.removeChild(fake);\n      } else {\n        this.dialog_.focus();\n      }\n\n      var redirectedEvent = document.createEvent('MouseEvents');\n      redirectedEvent.initMouseEvent(e.type, e.bubbles, e.cancelable, window,\n          e.detail, e.screenX, e.screenY, e.clientX, e.clientY, e.ctrlKey,\n          e.altKey, e.shiftKey, e.metaKey, e.button, e.relatedTarget);\n      this.dialog_.dispatchEvent(redirectedEvent);\n      e.stopPropagation();\n    },\n\n    /**\n     * Focuses on the first focusable element within the dialog. This will always blur the current\n     * focus, even if nothing within the dialog is found.\n     */\n    focus_: function() {\n      // Find element with `autofocus` attribute, or fall back to the first form/tabindex control.\n      var target = this.dialog_.querySelector('[autofocus]:not([disabled])');\n      if (!target && this.dialog_.tabIndex >= 0) {\n        target = this.dialog_;\n      }\n      if (!target) {\n        // Note that this is 'any focusable area'. This list is probably not exhaustive, but the\n        // alternative involves stepping through and trying to focus everything.\n        var opts = ['button', 'input', 'keygen', 'select', 'textarea'];\n        var query = opts.map(function(el) {\n          return el + ':not([disabled])';\n        });\n        // TODO(samthor): tabindex values that are not numeric are not focusable.\n        query.push('[tabindex]:not([disabled]):not([tabindex=\"\"])');  // tabindex != \"\", not disabled\n        target = this.dialog_.querySelector(query.join(', '));\n      }\n      safeBlur(document.activeElement);\n      target && target.focus();\n    },\n\n    /**\n     * Sets the zIndex for the backdrop and dialog.\n     *\n     * @param {number} dialogZ\n     * @param {number} backdropZ\n     */\n    updateZIndex: function(dialogZ, backdropZ) {\n      if (dialogZ < backdropZ) {\n        throw new Error('dialogZ should never be < backdropZ');\n      }\n      this.dialog_.style.zIndex = dialogZ;\n      this.backdrop_.style.zIndex = backdropZ;\n    },\n\n    /**\n     * Shows the dialog. If the dialog is already open, this does nothing.\n     */\n    show: function() {\n      if (!this.dialog_.open) {\n        this.setOpen(true);\n        this.focus_();\n      }\n    },\n\n    /**\n     * Show this dialog modally.\n     */\n    showModal: function() {\n      if (this.dialog_.hasAttribute('open')) {\n        throw new Error('Failed to execute \\'showModal\\' on dialog: The element is already open, and therefore cannot be opened modally.');\n      }\n      if (!document.body.contains(this.dialog_)) {\n        throw new Error('Failed to execute \\'showModal\\' on dialog: The element is not in a Document.');\n      }\n      if (!dialogPolyfill.dm.pushDialog(this)) {\n        throw new Error('Failed to execute \\'showModal\\' on dialog: There are too many open modal dialogs.');\n      }\n\n      if (createsStackingContext(this.dialog_.parentElement)) {\n        console.warn('A dialog is being shown inside a stacking context. ' +\n            'This may cause it to be unusable. For more information, see this link: ' +\n            'https://github.com/GoogleChrome/dialog-polyfill/#stacking-context');\n      }\n\n      this.setOpen(true);\n      this.openAsModal_ = true;\n\n      // Optionally center vertically, relative to the current viewport.\n      if (dialogPolyfill.needsCentering(this.dialog_)) {\n        dialogPolyfill.reposition(this.dialog_);\n        this.replacedStyleTop_ = true;\n      } else {\n        this.replacedStyleTop_ = false;\n      }\n\n      // Insert backdrop.\n      this.dialog_.parentNode.insertBefore(this.backdrop_, this.dialog_.nextSibling);\n\n      // Focus on whatever inside the dialog.\n      this.focus_();\n    },\n\n    /**\n     * Closes this HTMLDialogElement. This is optional vs clearing the open\n     * attribute, however this fires a 'close' event.\n     *\n     * @param {string=} opt_returnValue to use as the returnValue\n     */\n    close: function(opt_returnValue) {\n      if (!this.dialog_.hasAttribute('open')) {\n        throw new Error('Failed to execute \\'close\\' on dialog: The element does not have an \\'open\\' attribute, and therefore cannot be closed.');\n      }\n      this.setOpen(false);\n\n      // Leave returnValue untouched in case it was set directly on the element\n      if (opt_returnValue !== undefined) {\n        this.dialog_.returnValue = opt_returnValue;\n      }\n\n      // Triggering \"close\" event for any attached listeners on the <dialog>.\n      var closeEvent = new supportCustomEvent('close', {\n        bubbles: false,\n        cancelable: false\n      });\n      this.dialog_.dispatchEvent(closeEvent);\n    }\n\n  };\n\n  var dialogPolyfill = {};\n\n  dialogPolyfill.reposition = function(element) {\n    var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\n    var topValue = scrollTop + (window.innerHeight - element.offsetHeight) / 2;\n    element.style.top = Math.max(scrollTop, topValue) + 'px';\n  };\n\n  dialogPolyfill.isInlinePositionSetByStylesheet = function(element) {\n    for (var i = 0; i < document.styleSheets.length; ++i) {\n      var styleSheet = document.styleSheets[i];\n      var cssRules = null;\n      // Some browsers throw on cssRules.\n      try {\n        cssRules = styleSheet.cssRules;\n      } catch (e) {}\n      if (!cssRules) { continue; }\n      for (var j = 0; j < cssRules.length; ++j) {\n        var rule = cssRules[j];\n        var selectedNodes = null;\n        // Ignore errors on invalid selector texts.\n        try {\n          selectedNodes = document.querySelectorAll(rule.selectorText);\n        } catch(e) {}\n        if (!selectedNodes || !inNodeList(selectedNodes, element)) {\n          continue;\n        }\n        var cssTop = rule.style.getPropertyValue('top');\n        var cssBottom = rule.style.getPropertyValue('bottom');\n        if ((cssTop && cssTop !== 'auto') || (cssBottom && cssBottom !== 'auto')) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n\n  dialogPolyfill.needsCentering = function(dialog) {\n    var computedStyle = window.getComputedStyle(dialog);\n    if (computedStyle.position !== 'absolute') {\n      return false;\n    }\n\n    // We must determine whether the top/bottom specified value is non-auto.  In\n    // WebKit/Blink, checking computedStyle.top == 'auto' is sufficient, but\n    // Firefox returns the used value. So we do this crazy thing instead: check\n    // the inline style and then go through CSS rules.\n    if ((dialog.style.top !== 'auto' && dialog.style.top !== '') ||\n        (dialog.style.bottom !== 'auto' && dialog.style.bottom !== '')) {\n      return false;\n    }\n    return !dialogPolyfill.isInlinePositionSetByStylesheet(dialog);\n  };\n\n  /**\n   * @param {!Element} element to force upgrade\n   */\n  dialogPolyfill.forceRegisterDialog = function(element) {\n    if (window.HTMLDialogElement || element.showModal) {\n      console.warn('This browser already supports <dialog>, the polyfill ' +\n          'may not work correctly', element);\n    }\n    if (element.localName !== 'dialog') {\n      throw new Error('Failed to register dialog: The element is not a dialog.');\n    }\n    new dialogPolyfillInfo(/** @type {!HTMLDialogElement} */ (element));\n  };\n\n  /**\n   * @param {!Element} element to upgrade, if necessary\n   */\n  dialogPolyfill.registerDialog = function(element) {\n    if (!element.showModal) {\n      dialogPolyfill.forceRegisterDialog(element);\n    }\n  };\n\n  /**\n   * @constructor\n   */\n  dialogPolyfill.DialogManager = function() {\n    /** @type {!Array<!dialogPolyfillInfo>} */\n    this.pendingDialogStack = [];\n\n    var checkDOM = this.checkDOM_.bind(this);\n\n    // The overlay is used to simulate how a modal dialog blocks the document.\n    // The blocking dialog is positioned on top of the overlay, and the rest of\n    // the dialogs on the pending dialog stack are positioned below it. In the\n    // actual implementation, the modal dialog stacking is controlled by the\n    // top layer, where z-index has no effect.\n    this.overlay = document.createElement('div');\n    this.overlay.className = '_dialog_overlay';\n    this.overlay.addEventListener('click', function(e) {\n      this.forwardTab_ = undefined;\n      e.stopPropagation();\n      checkDOM([]);  // sanity-check DOM\n    }.bind(this));\n\n    this.handleKey_ = this.handleKey_.bind(this);\n    this.handleFocus_ = this.handleFocus_.bind(this);\n\n    this.zIndexLow_ = 100000;\n    this.zIndexHigh_ = 100000 + 150;\n\n    this.forwardTab_ = undefined;\n\n    if ('MutationObserver' in window) {\n      this.mo_ = new MutationObserver(function(records) {\n        var removed = [];\n        records.forEach(function(rec) {\n          for (var i = 0, c; c = rec.removedNodes[i]; ++i) {\n            if (!(c instanceof Element)) {\n              continue;\n            } else if (c.localName === 'dialog') {\n              removed.push(c);\n            }\n            removed = removed.concat(c.querySelectorAll('dialog'));\n          }\n        });\n        removed.length && checkDOM(removed);\n      });\n    }\n  };\n\n  /**\n   * Called on the first modal dialog being shown. Adds the overlay and related\n   * handlers.\n   */\n  dialogPolyfill.DialogManager.prototype.blockDocument = function() {\n    document.documentElement.addEventListener('focus', this.handleFocus_, true);\n    document.addEventListener('keydown', this.handleKey_);\n    this.mo_ && this.mo_.observe(document, {childList: true, subtree: true});\n  };\n\n  /**\n   * Called on the first modal dialog being removed, i.e., when no more modal\n   * dialogs are visible.\n   */\n  dialogPolyfill.DialogManager.prototype.unblockDocument = function() {\n    document.documentElement.removeEventListener('focus', this.handleFocus_, true);\n    document.removeEventListener('keydown', this.handleKey_);\n    this.mo_ && this.mo_.disconnect();\n  };\n\n  /**\n   * Updates the stacking of all known dialogs.\n   */\n  dialogPolyfill.DialogManager.prototype.updateStacking = function() {\n    var zIndex = this.zIndexHigh_;\n\n    for (var i = 0, dpi; dpi = this.pendingDialogStack[i]; ++i) {\n      dpi.updateZIndex(--zIndex, --zIndex);\n      if (i === 0) {\n        this.overlay.style.zIndex = --zIndex;\n      }\n    }\n\n    // Make the overlay a sibling of the dialog itself.\n    var last = this.pendingDialogStack[0];\n    if (last) {\n      var p = last.dialog.parentNode || document.body;\n      p.appendChild(this.overlay);\n    } else if (this.overlay.parentNode) {\n      this.overlay.parentNode.removeChild(this.overlay);\n    }\n  };\n\n  /**\n   * @param {Element} candidate to check if contained or is the top-most modal dialog\n   * @return {boolean} whether candidate is contained in top dialog\n   */\n  dialogPolyfill.DialogManager.prototype.containedByTopDialog_ = function(candidate) {\n    while (candidate = findNearestDialog(candidate)) {\n      for (var i = 0, dpi; dpi = this.pendingDialogStack[i]; ++i) {\n        if (dpi.dialog === candidate) {\n          return i === 0;  // only valid if top-most\n        }\n      }\n      candidate = candidate.parentElement;\n    }\n    return false;\n  };\n\n  dialogPolyfill.DialogManager.prototype.handleFocus_ = function(event) {\n    if (this.containedByTopDialog_(event.target)) { return; }\n\n    event.preventDefault();\n    event.stopPropagation();\n    safeBlur(/** @type {Element} */ (event.target));\n\n    if (this.forwardTab_ === undefined) { return; }  // move focus only from a tab key\n\n    var dpi = this.pendingDialogStack[0];\n    var dialog = dpi.dialog;\n    var position = dialog.compareDocumentPosition(event.target);\n    if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n      if (this.forwardTab_) {  // forward\n        dpi.focus_();\n      } else {  // backwards\n        document.documentElement.focus();\n      }\n    } else {\n      // TODO: Focus after the dialog, is ignored.\n    }\n\n    return false;\n  };\n\n  dialogPolyfill.DialogManager.prototype.handleKey_ = function(event) {\n    this.forwardTab_ = undefined;\n    if (event.keyCode === 27) {\n      event.preventDefault();\n      event.stopPropagation();\n      var cancelEvent = new supportCustomEvent('cancel', {\n        bubbles: false,\n        cancelable: true\n      });\n      var dpi = this.pendingDialogStack[0];\n      if (dpi && dpi.dialog.dispatchEvent(cancelEvent)) {\n        dpi.dialog.close();\n      }\n    } else if (event.keyCode === 9) {\n      this.forwardTab_ = !event.shiftKey;\n    }\n  };\n\n  /**\n   * Finds and downgrades any known modal dialogs that are no longer displayed. Dialogs that are\n   * removed and immediately readded don't stay modal, they become normal.\n   *\n   * @param {!Array<!HTMLDialogElement>} removed that have definitely been removed\n   */\n  dialogPolyfill.DialogManager.prototype.checkDOM_ = function(removed) {\n    // This operates on a clone because it may cause it to change. Each change also calls\n    // updateStacking, which only actually needs to happen once. But who removes many modal dialogs\n    // at a time?!\n    var clone = this.pendingDialogStack.slice();\n    clone.forEach(function(dpi) {\n      if (removed.indexOf(dpi.dialog) !== -1) {\n        dpi.downgradeModal();\n      } else {\n        dpi.maybeHideModal();\n      }\n    });\n  };\n\n  /**\n   * @param {!dialogPolyfillInfo} dpi\n   * @return {boolean} whether the dialog was allowed\n   */\n  dialogPolyfill.DialogManager.prototype.pushDialog = function(dpi) {\n    var allowed = (this.zIndexHigh_ - this.zIndexLow_) / 2 - 1;\n    if (this.pendingDialogStack.length >= allowed) {\n      return false;\n    }\n    if (this.pendingDialogStack.unshift(dpi) === 1) {\n      this.blockDocument();\n    }\n    this.updateStacking();\n    return true;\n  };\n\n  /**\n   * @param {!dialogPolyfillInfo} dpi\n   */\n  dialogPolyfill.DialogManager.prototype.removeDialog = function(dpi) {\n    var index = this.pendingDialogStack.indexOf(dpi);\n    if (index === -1) { return; }\n\n    this.pendingDialogStack.splice(index, 1);\n    if (this.pendingDialogStack.length === 0) {\n      this.unblockDocument();\n    }\n    this.updateStacking();\n  };\n\n  dialogPolyfill.dm = new dialogPolyfill.DialogManager();\n  dialogPolyfill.formSubmitter = null;\n  dialogPolyfill.useValue = null;\n\n  /**\n   * Installs global handlers, such as click listers and native method overrides. These are needed\n   * even if a no dialog is registered, as they deal with <form method=\"dialog\">.\n   */\n  if (window.HTMLDialogElement === undefined) {\n\n    /**\n     * If HTMLFormElement translates method=\"DIALOG\" into 'get', then replace the descriptor with\n     * one that returns the correct value.\n     */\n    var testForm = document.createElement('form');\n    testForm.setAttribute('method', 'dialog');\n    if (testForm.method !== 'dialog') {\n      var methodDescriptor = Object.getOwnPropertyDescriptor(HTMLFormElement.prototype, 'method');\n      if (methodDescriptor) {\n        // TODO: older iOS and older PhantomJS fail to return the descriptor here\n        var realGet = methodDescriptor.get;\n        methodDescriptor.get = function() {\n          if (isFormMethodDialog(this)) {\n            return 'dialog';\n          }\n          return realGet.call(this);\n        };\n        var realSet = methodDescriptor.set;\n        methodDescriptor.set = function(v) {\n          if (typeof v === 'string' && v.toLowerCase() === 'dialog') {\n            return this.setAttribute('method', v);\n          }\n          return realSet.call(this, v);\n        };\n        Object.defineProperty(HTMLFormElement.prototype, 'method', methodDescriptor);\n      }\n    }\n\n    /**\n     * Global 'click' handler, to capture the <input type=\"submit\"> or <button> element which has\n     * submitted a <form method=\"dialog\">. Needed as Safari and others don't report this inside\n     * document.activeElement.\n     */\n    document.addEventListener('click', function(ev) {\n      dialogPolyfill.formSubmitter = null;\n      dialogPolyfill.useValue = null;\n      if (ev.defaultPrevented) { return; }  // e.g. a submit which prevents default submission\n\n      var target = /** @type {Element} */ (ev.target);\n      if (!target || !isFormMethodDialog(target.form)) { return; }\n\n      var valid = (target.type === 'submit' && ['button', 'input'].indexOf(target.localName) > -1);\n      if (!valid) {\n        if (!(target.localName === 'input' && target.type === 'image')) { return; }\n        // this is a <input type=\"image\">, which can submit forms\n        dialogPolyfill.useValue = ev.offsetX + ',' + ev.offsetY;\n      }\n\n      var dialog = findNearestDialog(target);\n      if (!dialog) { return; }\n\n      dialogPolyfill.formSubmitter = target;\n    }, false);\n\n    /**\n     * Replace the native HTMLFormElement.submit() method, as it won't fire the\n     * submit event and give us a chance to respond.\n     */\n    var nativeFormSubmit = HTMLFormElement.prototype.submit;\n    function replacementFormSubmit() {\n      if (!isFormMethodDialog(this)) {\n        return nativeFormSubmit.call(this);\n      }\n      var dialog = findNearestDialog(this);\n      dialog && dialog.close();\n    }\n    HTMLFormElement.prototype.submit = replacementFormSubmit;\n\n    /**\n     * Global form 'dialog' method handler. Closes a dialog correctly on submit\n     * and possibly sets its return value.\n     */\n    document.addEventListener('submit', function(ev) {\n      var form = /** @type {HTMLFormElement} */ (ev.target);\n      if (!isFormMethodDialog(form)) { return; }\n      ev.preventDefault();\n\n      var dialog = findNearestDialog(form);\n      if (!dialog) { return; }\n\n      // Forms can only be submitted via .submit() or a click (?), but anyway: sanity-check that\n      // the submitter is correct before using its value as .returnValue.\n      var s = dialogPolyfill.formSubmitter;\n      if (s && s.form === form) {\n        dialog.close(dialogPolyfill.useValue || s.value);\n      } else {\n        dialog.close();\n      }\n      dialogPolyfill.formSubmitter = null;\n    }, true);\n  }\n\n  dialogPolyfill['forceRegisterDialog'] = dialogPolyfill.forceRegisterDialog;\n  dialogPolyfill['registerDialog'] = dialogPolyfill.registerDialog;\n\n  if (typeof define === 'function' && 'amd' in define) {\n    // AMD support\n    define(function() { return dialogPolyfill; });\n  } else if (typeof module === 'object' && typeof module['exports'] === 'object') {\n    // CommonJS support\n    module['exports'] = dialogPolyfill;\n  } else {\n    // all others\n    window['dialogPolyfill'] = dialogPolyfill;\n  }\n})();\n","/* global define */\n\n(function (root, pluralize) {\n  /* istanbul ignore else */\n  if (typeof require === 'function' && typeof exports === 'object' && typeof module === 'object') {\n    // Node.\n    module.exports = pluralize();\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD, registers as an anonymous module.\n    define(function () {\n      return pluralize();\n    });\n  } else {\n    // Browser global.\n    root.pluralize = pluralize();\n  }\n})(this, function () {\n  // Rule storage - pluralize and singularize need to be run sequentially,\n  // while other rules can be optimized using an object for instant lookups.\n  var pluralRules = [];\n  var singularRules = [];\n  var uncountables = {};\n  var irregularPlurals = {};\n  var irregularSingles = {};\n\n  /**\n   * Sanitize a pluralization rule to a usable regular expression.\n   *\n   * @param  {(RegExp|string)} rule\n   * @return {RegExp}\n   */\n  function sanitizeRule (rule) {\n    if (typeof rule === 'string') {\n      return new RegExp('^' + rule + '$', 'i');\n    }\n\n    return rule;\n  }\n\n  /**\n   * Pass in a word token to produce a function that can replicate the case on\n   * another word.\n   *\n   * @param  {string}   word\n   * @param  {string}   token\n   * @return {Function}\n   */\n  function restoreCase (word, token) {\n    // Tokens are an exact match.\n    if (word === token) return token;\n\n    // Upper cased words. E.g. \"HELLO\".\n    if (word === word.toUpperCase()) return token.toUpperCase();\n\n    // Title cased words. E.g. \"Title\".\n    if (word[0] === word[0].toUpperCase()) {\n      return token.charAt(0).toUpperCase() + token.substr(1).toLowerCase();\n    }\n\n    // Lower cased words. E.g. \"test\".\n    return token.toLowerCase();\n  }\n\n  /**\n   * Interpolate a regexp string.\n   *\n   * @param  {string} str\n   * @param  {Array}  args\n   * @return {string}\n   */\n  function interpolate (str, args) {\n    return str.replace(/\\$(\\d{1,2})/g, function (match, index) {\n      return args[index] || '';\n    });\n  }\n\n  /**\n   * Replace a word using a rule.\n   *\n   * @param  {string} word\n   * @param  {Array}  rule\n   * @return {string}\n   */\n  function replace (word, rule) {\n    return word.replace(rule[0], function (match, index) {\n      var result = interpolate(rule[1], arguments);\n\n      if (match === '') {\n        return restoreCase(word[index - 1], result);\n      }\n\n      return restoreCase(match, result);\n    });\n  }\n\n  /**\n   * Sanitize a word by passing in the word and sanitization rules.\n   *\n   * @param  {string}   token\n   * @param  {string}   word\n   * @param  {Array}    rules\n   * @return {string}\n   */\n  function sanitizeWord (token, word, rules) {\n    // Empty string or doesn't need fixing.\n    if (!token.length || uncountables.hasOwnProperty(token)) {\n      return word;\n    }\n\n    var len = rules.length;\n\n    // Iterate over the sanitization rules and use the first one to match.\n    while (len--) {\n      var rule = rules[len];\n\n      if (rule[0].test(word)) return replace(word, rule);\n    }\n\n    return word;\n  }\n\n  /**\n   * Replace a word with the updated word.\n   *\n   * @param  {Object}   replaceMap\n   * @param  {Object}   keepMap\n   * @param  {Array}    rules\n   * @return {Function}\n   */\n  function replaceWord (replaceMap, keepMap, rules) {\n    return function (word) {\n      // Get the correct token and case restoration functions.\n      var token = word.toLowerCase();\n\n      // Check against the keep object map.\n      if (keepMap.hasOwnProperty(token)) {\n        return restoreCase(word, token);\n      }\n\n      // Check against the replacement map for a direct word replacement.\n      if (replaceMap.hasOwnProperty(token)) {\n        return restoreCase(word, replaceMap[token]);\n      }\n\n      // Run all the rules against the word.\n      return sanitizeWord(token, word, rules);\n    };\n  }\n\n  /**\n   * Check if a word is part of the map.\n   */\n  function checkWord (replaceMap, keepMap, rules, bool) {\n    return function (word) {\n      var token = word.toLowerCase();\n\n      if (keepMap.hasOwnProperty(token)) return true;\n      if (replaceMap.hasOwnProperty(token)) return false;\n\n      return sanitizeWord(token, token, rules) === token;\n    };\n  }\n\n  /**\n   * Pluralize or singularize a word based on the passed in count.\n   *\n   * @param  {string}  word\n   * @param  {number}  count\n   * @param  {boolean} inclusive\n   * @return {string}\n   */\n  function pluralize (word, count, inclusive) {\n    var pluralized = count === 1\n      ? pluralize.singular(word) : pluralize.plural(word);\n\n    return (inclusive ? count + ' ' : '') + pluralized;\n  }\n\n  /**\n   * Pluralize a word.\n   *\n   * @type {Function}\n   */\n  pluralize.plural = replaceWord(\n    irregularSingles, irregularPlurals, pluralRules\n  );\n\n  /**\n   * Check if a word is plural.\n   *\n   * @type {Function}\n   */\n  pluralize.isPlural = checkWord(\n    irregularSingles, irregularPlurals, pluralRules\n  );\n\n  /**\n   * Singularize a word.\n   *\n   * @type {Function}\n   */\n  pluralize.singular = replaceWord(\n    irregularPlurals, irregularSingles, singularRules\n  );\n\n  /**\n   * Check if a word is singular.\n   *\n   * @type {Function}\n   */\n  pluralize.isSingular = checkWord(\n    irregularPlurals, irregularSingles, singularRules\n  );\n\n  /**\n   * Add a pluralization rule to the collection.\n   *\n   * @param {(string|RegExp)} rule\n   * @param {string}          replacement\n   */\n  pluralize.addPluralRule = function (rule, replacement) {\n    pluralRules.push([sanitizeRule(rule), replacement]);\n  };\n\n  /**\n   * Add a singularization rule to the collection.\n   *\n   * @param {(string|RegExp)} rule\n   * @param {string}          replacement\n   */\n  pluralize.addSingularRule = function (rule, replacement) {\n    singularRules.push([sanitizeRule(rule), replacement]);\n  };\n\n  /**\n   * Add an uncountable word rule.\n   *\n   * @param {(string|RegExp)} word\n   */\n  pluralize.addUncountableRule = function (word) {\n    if (typeof word === 'string') {\n      uncountables[word.toLowerCase()] = true;\n      return;\n    }\n\n    // Set singular and plural references for the word.\n    pluralize.addPluralRule(word, '$0');\n    pluralize.addSingularRule(word, '$0');\n  };\n\n  /**\n   * Add an irregular word definition.\n   *\n   * @param {string} single\n   * @param {string} plural\n   */\n  pluralize.addIrregularRule = function (single, plural) {\n    plural = plural.toLowerCase();\n    single = single.toLowerCase();\n\n    irregularSingles[single] = plural;\n    irregularPlurals[plural] = single;\n  };\n\n  /**\n   * Irregular rules.\n   */\n  [\n    // Pronouns.\n    ['I', 'we'],\n    ['me', 'us'],\n    ['he', 'they'],\n    ['she', 'they'],\n    ['them', 'them'],\n    ['myself', 'ourselves'],\n    ['yourself', 'yourselves'],\n    ['itself', 'themselves'],\n    ['herself', 'themselves'],\n    ['himself', 'themselves'],\n    ['themself', 'themselves'],\n    ['is', 'are'],\n    ['was', 'were'],\n    ['has', 'have'],\n    ['this', 'these'],\n    ['that', 'those'],\n    // Words ending in with a consonant and `o`.\n    ['echo', 'echoes'],\n    ['dingo', 'dingoes'],\n    ['volcano', 'volcanoes'],\n    ['tornado', 'tornadoes'],\n    ['torpedo', 'torpedoes'],\n    // Ends with `us`.\n    ['genus', 'genera'],\n    ['viscus', 'viscera'],\n    // Ends with `ma`.\n    ['stigma', 'stigmata'],\n    ['stoma', 'stomata'],\n    ['dogma', 'dogmata'],\n    ['lemma', 'lemmata'],\n    ['schema', 'schemata'],\n    ['anathema', 'anathemata'],\n    // Other irregular rules.\n    ['ox', 'oxen'],\n    ['axe', 'axes'],\n    ['die', 'dice'],\n    ['yes', 'yeses'],\n    ['foot', 'feet'],\n    ['eave', 'eaves'],\n    ['goose', 'geese'],\n    ['tooth', 'teeth'],\n    ['quiz', 'quizzes'],\n    ['human', 'humans'],\n    ['proof', 'proofs'],\n    ['carve', 'carves'],\n    ['valve', 'valves'],\n    ['looey', 'looies'],\n    ['thief', 'thieves'],\n    ['groove', 'grooves'],\n    ['pickaxe', 'pickaxes'],\n    ['whiskey', 'whiskies']\n  ].forEach(function (rule) {\n    return pluralize.addIrregularRule(rule[0], rule[1]);\n  });\n\n  /**\n   * Pluralization rules.\n   */\n  [\n    [/s?$/i, 's'],\n    [/[^\\u0000-\\u007F]$/i, '$0'],\n    [/([^aeiou]ese)$/i, '$1'],\n    [/(ax|test)is$/i, '$1es'],\n    [/(alias|[^aou]us|tlas|gas|ris)$/i, '$1es'],\n    [/(e[mn]u)s?$/i, '$1s'],\n    [/([^l]ias|[aeiou]las|[emjzr]as|[iu]am)$/i, '$1'],\n    [/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i, '$1i'],\n    [/(alumn|alg|vertebr)(?:a|ae)$/i, '$1ae'],\n    [/(seraph|cherub)(?:im)?$/i, '$1im'],\n    [/(her|at|gr)o$/i, '$1oes'],\n    [/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i, '$1a'],\n    [/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i, '$1a'],\n    [/sis$/i, 'ses'],\n    [/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i, '$1$2ves'],\n    [/([^aeiouy]|qu)y$/i, '$1ies'],\n    [/([^ch][ieo][ln])ey$/i, '$1ies'],\n    [/(x|ch|ss|sh|zz)$/i, '$1es'],\n    [/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i, '$1ices'],\n    [/(m|l)(?:ice|ouse)$/i, '$1ice'],\n    [/(pe)(?:rson|ople)$/i, '$1ople'],\n    [/(child)(?:ren)?$/i, '$1ren'],\n    [/eaux$/i, '$0'],\n    [/m[ae]n$/i, 'men'],\n    ['thou', 'you']\n  ].forEach(function (rule) {\n    return pluralize.addPluralRule(rule[0], rule[1]);\n  });\n\n  /**\n   * Singularization rules.\n   */\n  [\n    [/s$/i, ''],\n    [/(ss)$/i, '$1'],\n    [/(wi|kni|(?:after|half|high|low|mid|non|night|[^\\w]|^)li)ves$/i, '$1fe'],\n    [/(ar|(?:wo|[ae])l|[eo][ao])ves$/i, '$1f'],\n    [/ies$/i, 'y'],\n    [/\\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i, '$1ie'],\n    [/\\b(mon|smil)ies$/i, '$1ey'],\n    [/(m|l)ice$/i, '$1ouse'],\n    [/(seraph|cherub)im$/i, '$1'],\n    [/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|tlas|gas|(?:her|at|gr)o|ris)(?:es)?$/i, '$1'],\n    [/(analy|ba|diagno|parenthe|progno|synop|the|empha|cri)(?:sis|ses)$/i, '$1sis'],\n    [/(movie|twelve|abuse|e[mn]u)s$/i, '$1'],\n    [/(test)(?:is|es)$/i, '$1is'],\n    [/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i, '$1us'],\n    [/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i, '$1um'],\n    [/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i, '$1on'],\n    [/(alumn|alg|vertebr)ae$/i, '$1a'],\n    [/(cod|mur|sil|vert|ind)ices$/i, '$1ex'],\n    [/(matr|append)ices$/i, '$1ix'],\n    [/(pe)(rson|ople)$/i, '$1rson'],\n    [/(child)ren$/i, '$1'],\n    [/(eau)x?$/i, '$1'],\n    [/men$/i, 'man']\n  ].forEach(function (rule) {\n    return pluralize.addSingularRule(rule[0], rule[1]);\n  });\n\n  /**\n   * Uncountable rules.\n   */\n  [\n    // Singular words with no plurals.\n    'adulthood',\n    'advice',\n    'agenda',\n    'aid',\n    'alcohol',\n    'ammo',\n    'anime',\n    'athletics',\n    'audio',\n    'bison',\n    'blood',\n    'bream',\n    'buffalo',\n    'butter',\n    'carp',\n    'cash',\n    'chassis',\n    'chess',\n    'clothing',\n    'cod',\n    'commerce',\n    'cooperation',\n    'corps',\n    'debris',\n    'diabetes',\n    'digestion',\n    'elk',\n    'energy',\n    'equipment',\n    'excretion',\n    'expertise',\n    'flounder',\n    'fun',\n    'gallows',\n    'garbage',\n    'graffiti',\n    'headquarters',\n    'health',\n    'herpes',\n    'highjinks',\n    'homework',\n    'housework',\n    'information',\n    'jeans',\n    'justice',\n    'kudos',\n    'labour',\n    'literature',\n    'machinery',\n    'mackerel',\n    'mail',\n    'media',\n    'mews',\n    'moose',\n    'music',\n    'manga',\n    'news',\n    'pike',\n    'plankton',\n    'pliers',\n    'pollution',\n    'premises',\n    'rain',\n    'research',\n    'rice',\n    'salmon',\n    'scissors',\n    'series',\n    'sewage',\n    'shambles',\n    'shrimp',\n    'species',\n    'staff',\n    'swine',\n    'tennis',\n    'traffic',\n    'transporation',\n    'trout',\n    'tuna',\n    'wealth',\n    'welfare',\n    'whiting',\n    'wildebeest',\n    'wildlife',\n    'you',\n    // Regexes.\n    /[^aeiou]ese$/i, // \"chinese\", \"japanese\"\n    /deer$/i, // \"deer\", \"reindeer\"\n    /fish$/i, // \"fish\", \"blowfish\", \"angelfish\"\n    /measles$/i,\n    /o[iu]s$/i, // \"carnivorous\"\n    /pox$/i, // \"chickpox\", \"smallpox\"\n    /sheep$/i\n  ].forEach(pluralize.addUncountableRule);\n\n  return pluralize;\n});\n","/**\r\n * An error for when a string is the correct type but not in the expected format.\r\n */\r\nexport default class FormatError extends Error {\r\n  /**\r\n   * Creates a new FormatError instance\r\n   * @param input The input that wasn't in the correct format.\r\n   * @param format The expected format\r\n   */\r\n  constructor(public readonly input: string, public readonly format: RegExp) {\r\n    super(\r\n      `Input string was not in expected format.\\nExpected ${\r\n        format.source\r\n      }\\nGot ${input}`\r\n    );\r\n  }\r\n}\r\n","/**\r\n * This module creates the dialog that shows the exported\r\n * feature set data.\r\n */\r\n\r\nimport dialogPolyfill from \"dialog-polyfill\";\r\nimport { parseDataUrl } from \"./conversionUtils\";\r\nimport FormatError from \"./FormatError\";\r\n\r\n/**\r\n * Tests the browser to see if it supports <dialog> natively.\r\n * @returns {boolean} Returns true if browser supports <dialog> natively, false otherwise.\r\n */\r\nexport function supportsDialog(): boolean {\r\n  const dialog = document.createElement(\"dialog\") as HTMLDialogElement;\r\n  return !!dialog.show && !!dialog.showModal && !!dialog.close;\r\n}\r\n\r\nconst needsDialogPolyfill = !supportsDialog();\r\n\r\n/**\r\n * Adds link to CSS file <link> to document head only if <dialog> is not supported natively.\r\n * @param {string} cssPath Path to CSS file for dialog polyfill.\r\n * @param {string} [sri] Optional SRI hash.\r\n * @see https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity\r\n * @returns {?HTMLLinkElement} Returns the <link> element if it was added, or null otherwise.\r\n */\r\nexport function addDialogPolyfillCss(\r\n  cssPath: string,\r\n  sri?: string\r\n): HTMLLinkElement | null {\r\n  if (needsDialogPolyfill) {\r\n    const link = document.createElement(\"link\");\r\n    link.rel = \"stylesheet\";\r\n    link.href = cssPath;\r\n    if (sri) {\r\n      link.integrity = sri;\r\n      link.crossOrigin = \"anonymous\";\r\n    }\r\n    document.head.appendChild(link);\r\n    return link;\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * Creates a dialog and registers it with the dialog polyfill.\r\n * At the top of the dialog will be a close button that will\r\n * dismiss the dialog.\r\n * @param {string} id - The value to assign to the dialog element's \"id\" attribute.\r\n * @param {HTMLElement} [content] The content of the dialog\r\n * @returns {HTMLDialogElement}\r\n */\r\nfunction makeCloseableDialog(\r\n  id: string,\r\n  content?: HTMLElement\r\n): HTMLDialogElement {\r\n  // Create the dialog element and child content, then\r\n  // add dialog element to the document body.\r\n  // tslint:disable-next-line:no-shadowed-variable\r\n  const dialog = document.createElement(\"dialog\") as HTMLDialogElement;\r\n  dialog.id = id;\r\n  // tslint:disable-next-line:no-shadowed-variable\r\n\r\n  const closeLink = document.createElement(\"a\");\r\n  const header = document.createElement(\"header\");\r\n  header.classList.add(\"dialog-header\");\r\n  header.appendChild(closeLink);\r\n  closeLink.textContent = \"🗙\";\r\n  closeLink.href = \"#\";\r\n  closeLink.classList.add(\"close-link\");\r\n  dialog.appendChild(header);\r\n  if (content) {\r\n    dialog.appendChild(content);\r\n  }\r\n  document.body.appendChild(dialog);\r\n\r\n  if (needsDialogPolyfill) {\r\n    // Register the dialog element with the dialog polyfill.\r\n    // When all modern browsers support the dialog element,\r\n    // the polyfill and this registration step will no longer\r\n    // be necessary.\r\n    dialogPolyfill.registerDialog(dialog);\r\n  }\r\n\r\n  // Setup the dialog's close button functionality.\r\n  closeLink.addEventListener(\"click\", ev => {\r\n    dialog.close();\r\n    ev.preventDefault();\r\n  });\r\n\r\n  return dialog;\r\n}\r\n\r\n/**\r\n * Creates a closeable dialog containing a <textarea> element.\r\n * @param {string} id Value to assign to the dialog's id attribute\r\n * @returns {HTMLDialogElement}\r\n */\r\nexport function makeCloseableTextAreaDialog(id: string): HTMLDialogElement {\r\n  const textArea = document.createElement(\"textarea\");\r\n  textArea.readOnly = true;\r\n\r\n  return makeCloseableDialog(id, textArea);\r\n}\r\n\r\n/**\r\n * An event handler that will open the dialog and show the contents of the data URL.\r\n * @this {HTMLAnchorElement} The <a> element that is being assigned an event handler. This <a> element\r\n * must have a data-dialog-id attribute set to the value of a dialog element's id attribute\r\n * @param {MouseEvent} ev mouse event.\r\n */\r\nexport function showDialogHandler(this: HTMLAnchorElement, ev: MouseEvent) {\r\n  const dataUrl = this.href;\r\n  const { mediaType, base64, data } = parseDataUrl(dataUrl);\r\n\r\n  if (data) {\r\n    if (!this.dataset.dialogId) {\r\n      console.error(\"Link has no dialog ID.\", this);\r\n    } else {\r\n      const dialog = document.getElementById(\r\n        this.dataset.dialogId!\r\n      ) as HTMLDialogElement | null;\r\n      if (!dialog) {\r\n        console.error(\r\n          `No dialog with id of \"${this.dataset.dialogId} was found.`\r\n        );\r\n      } else {\r\n        const textarea = dialog.querySelector(\"textarea\");\r\n        if (!textarea) {\r\n          throw new Error(\"The dialog does not have a textarea element.\");\r\n        }\r\n        textarea.value = data;\r\n        dialog.showModal();\r\n      }\r\n    }\r\n  }\r\n\r\n  ev.preventDefault();\r\n}\r\n","import FormatError from \"./FormatError\";\r\n\r\n/**\r\n * Represents the components that make up a data URL.\r\n */\r\nexport interface IDataUrlParts {\r\n  /** The media type, aka MIME type. */\r\n  mediaType?: string;\r\n  /** Indicates if the data in the URL was base64 encoded. */\r\n  base64: boolean;\r\n  /** The unencoded data */\r\n  data: string;\r\n}\r\n\r\n/**\r\n * Parses a data URL into a string.\r\n * @param {string} dataUrl A data URL\r\n * @throws {FormatError} Thrown if dataUrl is not a correctly formatted data URL.\r\n */\r\nexport function parseDataUrl(dataUrl: string): IDataUrlParts {\r\n  // data:[<mediatype>][;base64],<data>\r\n  const re = /^data:([^;]+)?(?:;([^,]+))?,(.+)$/;\r\n  const match = dataUrl.match(re);\r\n  if (match) {\r\n    const [mediaType, base64, data] = match.slice(1);\r\n    let text: string;\r\n    if (base64) {\r\n      text = btoa(data);\r\n    } else {\r\n      text = decodeURIComponent(data);\r\n    }\r\n    return {\r\n      mediaType,\r\n      base64: Boolean(base64),\r\n      data: text\r\n    };\r\n  } else {\r\n    // const text = dataUrl;\r\n    // return { mediaType: null, base64: null, text };\r\n    throw new FormatError(dataUrl, re);\r\n  }\r\n}\r\n","import pluralize from \"pluralize\";\r\nimport {\r\n  addDialogPolyfillCss,\r\n  makeCloseableTextAreaDialog,\r\n  showDialogHandler\r\n} from \"./dialogUtils\";\r\n\r\nimport { loadModules } from \"esri-loader\";\r\n\r\naddDialogPolyfillCss(\r\n  \"https://cdn.jsdelivr.net/npm/dialog-polyfill@0.4.9/dialog-polyfill.css\",\r\n  \"sha256-hT0ET4tfm+7MyjeBepBgV2N5tOmsAVKcTWhH82jvoaA=\"\r\n);\r\n\r\nloadModules([\r\n  \"esri/geometry/webMercatorUtils\",\r\n  \"esri/graphic\",\r\n  \"esri/layers/GraphicsLayer\",\r\n  \"esri/map\",\r\n  \"esri/symbols/SimpleFillSymbol\",\r\n  \"esri/symbols/SimpleLineSymbol\",\r\n  \"esri/symbols/SimpleMarkerSymbol\",\r\n  \"esri/toolbars/draw\"\r\n]).then(\r\n  ([\r\n    webMercatorUtils,\r\n    Graphic,\r\n    GraphicsLayer,\r\n    EsriMap,\r\n    SimpleFillSymbol,\r\n    SimpleLineSymbol,\r\n    SimpleMarkerSymbol,\r\n    Draw\r\n  ]) => {\r\n    const drawSelect = document.getElementById(\r\n      \"drawSelect\"\r\n    ) as HTMLSelectElement;\r\n\r\n    const dialog = makeCloseableTextAreaDialog(\"exportDialog\");\r\n\r\n    const map = new EsriMap(\"map\", {\r\n      basemap: \"gray-vector\",\r\n      center: [-120.80566406246835, 47.41322033015946],\r\n      zoom: 7,\r\n      showAttribution: true\r\n    });\r\n\r\n    const graphicsLayer = new GraphicsLayer({\r\n      id: \"graphics\"\r\n    });\r\n    map.addLayer(graphicsLayer);\r\n\r\n    document.getElementById(\"clearButton\")!.addEventListener(\"click\", () => {\r\n      graphicsLayer.clear();\r\n    });\r\n\r\n    const pointSymbol = new SimpleMarkerSymbol();\r\n    const lineSymbol = new SimpleLineSymbol();\r\n    const polygonSymbol = new SimpleFillSymbol();\r\n\r\n    const draw = new Draw(map);\r\n\r\n    draw.on(\"draw-complete\", (e: any) => {\r\n      console.log(\"draw-complete\", e);\r\n      const geoType = e.geometry.type;\r\n      const symbol = /point/i.test(geoType)\r\n        ? pointSymbol\r\n        : /line/i.test(geoType) ? lineSymbol : polygonSymbol;\r\n      const g = new Graphic(e.geometry, symbol, {\r\n        label: `This is a ${e.geometry.type}`\r\n      });\r\n      console.log(\"graphic\", g);\r\n      graphicsLayer.add(g);\r\n    });\r\n\r\n    // When the user selects an option from the select,\r\n    // change the activated tool (or deactivate if no\r\n    // tool is selected).\r\n    drawSelect.addEventListener(\"change\", e => {\r\n      const target = e.target as HTMLSelectElement;\r\n      const val = target.value;\r\n      if (val) {\r\n        draw.activate(Draw[val]);\r\n      } else {\r\n        draw.deactivate();\r\n      }\r\n    });\r\n\r\n    function layerHasGraphics(layer: any) {\r\n      return layer && layer.graphics && layer.graphics.length;\r\n    }\r\n\r\n    function projectGraphic(graphic: any) {\r\n      const { geometry, attributes } = graphic;\r\n      const projectedGeometry = webMercatorUtils.webMercatorToGeographic(\r\n        geometry\r\n      );\r\n      delete projectedGeometry.spatialReference;\r\n      return {\r\n        geometry: projectedGeometry,\r\n        attributes\r\n      };\r\n    }\r\n\r\n    function createAnchor(gLayer: any) {\r\n      const sr = { wkid: 4326 };\r\n      const jsonFeatures = gLayer.graphics.map(projectGraphic);\r\n      const jsonObjects = { features: jsonFeatures, spatialRefernence: sr };\r\n\r\n      const jsonString = JSON.stringify(jsonObjects);\r\n      const url = `data:application/json,${encodeURIComponent(jsonString)}`;\r\n      const a = document.createElement(\"a\");\r\n      a.dataset.dialogId = dialog.id;\r\n      a.title = \"Right-click this link to open in new tab.\";\r\n      a.href = url;\r\n      a.target = \"_blank\";\r\n      a.textContent = pluralize(\"feature\", jsonFeatures.length, true);\r\n      a.addEventListener(\"click\", showDialogHandler);\r\n\r\n      return a;\r\n    }\r\n\r\n    const exportButton = document.getElementById(\"exportButton\")!;\r\n    exportButton.addEventListener(\"click\", () => {\r\n      if (layerHasGraphics(graphicsLayer)) {\r\n        const a = createAnchor(graphicsLayer);\r\n\r\n        const li = document.createElement(\"li\");\r\n        li.appendChild(a);\r\n        document.getElementById(\"exportedGraphics\")!.appendChild(li);\r\n      }\r\n    });\r\n  }\r\n);\r\n","module.exports = function() {\r\n\tthrow new Error(\"define cannot be used indirect\");\r\n};\r\n"],"sourceRoot":""}